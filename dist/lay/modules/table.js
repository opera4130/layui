/** layui-v2.5.6 MIT License By https://www.layui.com */
 ;layui.define(["laytpl","laypage","layer","form","util"],function(e){"use strict";function t(e){if(!e)return 0;for(var t=e.split(","),a=0,l=0,n=0;n<t.length;n++)l=i(t[n]).height(),null!==l&&void 0!==l&&""!=l&&(a+=l);return a}var i=layui.$,a=layui.laytpl,l=layui.laypage,n=layui.layer,o=layui.form,r=layui.util,d=layui.hint(),c=layui.device(),s={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var t=this;return t.config=i.extend({},t.config,e),t},on:function(e,t){return layui.onevent.call(this,f,e,t)}},u=function(){var e=this,t=e.config,i=t.id||t.index;return i&&(u.that[i]=e,u.config[i]=t),{config:t,reload:function(t){e.reload.call(e,t)},setColsWidth:function(){e.setColsWidth.call(e)},resize:function(){e.resize.call(e)}}},h=function(e){var t=u.config[e];return t||d.error("The ID option was not found in the table instance"),t||null},y=function(e,t,l,n){var o=e.templet?function(){return"function"==typeof e.templet?e.templet(l):a(i(e.templet).html()||String(t)).render(l)}():t;return n?i("<div>"+o+"</div>").text():o},f="table",p=".layui-table",v="layui-hide",m="layui-none",g="layui-table-view",b=".layui-table-tool",x=".layui-table-box",k=".layui-table-init",C=".layui-table-header",w=".layui-table-body",T=".layui-table-main",N=".layui-table-fixed",A=".layui-table-fixed-l",L=".layui-table-fixed-r",S=".layui-table-total",E=".layui-table-page",R=".layui-table-sort",W="layui-table-edit",_="layui-table-hover",z=function(e){var t='{{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}}';return e=e||{},['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){return e.fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':""}(),"{{# var isSort = !(item2.colGroup) && item2.sort; }}",'<th data-field="{{ item2.field||i2 }}" data-key="{{d.index}}-{{i1}}-{{i2}}" {{# if( item2.parentKey){ }}data-parentkey="{{ item2.parentKey }}"{{# } }} {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} '+t+' {{# if(item2.unresize || item2.colGroup){ }}data-unresize="true"{{# } }} class="{{# if(item2.hide){ }}layui-hide{{# } }}{{# if(isSort){ }} layui-unselect{{# } }}{{# if(!item2.field){ }} layui-table-col-special{{# } }}">','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colGroup){ }}","group","{{# } else { }}","{{d.index}}-{{i1}}-{{i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(isSort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc" title="升序"></i><i class="layui-edge layui-table-sort-desc" title="降序"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},H=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),j=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" lay-id="{{ d.data.id }}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool">','<div class="layui-table-tool-temp"></div>','<div class="layui-table-tool-self"></div>',"</div>","{{# } }}",'<div class="layui-table-box">',"{{# if(d.data.loading){ }}",'<div class="layui-table-init" style="background-color: #fff;">','<i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i>',"</div>","{{# } }}","{{# var left, right; }}",'<div class="layui-table-header">',z(),"</div>",'<div class="layui-table-body layui-table-main">',H,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',z({fixed:!0}),"</div>",'<div class="layui-table-body">',H,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',z({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',H,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.totalRow){ }}",'<div class="layui-table-total">','<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>','<tbody><tr><td><div class="layui-table-cell" style="visibility: hidden;">Total</div></td></tr></tbody>',"</table>","</div>","{{# } }}","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{i1}}-{{i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),F=i(window),I=i(document),M=function(e){var t=this;t.index=++s.index,t.config=i.extend({},t.config,s.config,e),t.render()};M.prototype.config={limit:10,loading:!0,cellMinWidth:60,defaultToolbar:["filter","exports","print"],autoSort:!0,text:{none:"无数据"}},M.prototype.render=function(){var e=this,l=e.config;if(l.elem=i(l.elem),l.where=l.where||{},l.id=l.id||l.elem.attr("id")||e.index,l.request=i.extend({pageName:"page",limitName:"limit"},l.request),l.response=i.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",totalRowName:"totalRow",countName:"count"},l.response),"object"==typeof l.page&&(l.limit=l.page.limit||l.limit,l.limits=l.page.limits||l.limits,e.page=l.page.curr=l.page.curr||1,delete l.page.elem,delete l.page.jump),!l.elem[0])return e;l.height&&/^full-\d+$/.test(l.height)&&(e.fullHeightGap=l.height.split("-")[1],l.height=F.height()-e.fullHeightGap-t(l.heightChangeElement)),e.setInit();var n=l.elem,o=n.next("."+g),r=e.elem=i(a(j).render({VIEW_CLASS:g,data:l,index:e.index}));if(l.index=e.index,e.key=l.id||l.index,o[0]&&o.remove(),n.after(r),e.layTool=r.find(b),e.layBox=r.find(x),e.layHeader=r.find(C),e.layMain=r.find(T),e.layBody=r.find(w),e.layFixed=r.find(N),e.layFixLeft=r.find(A),e.layFixRight=r.find(L),e.layTotal=r.find(S),e.layPage=r.find(E),e.renderToolbar(),e.fullSize(),l.cols.length>1){var d=e.layFixed.find(C).find("th");d.height(e.layHeader.height()-1-parseFloat(d.css("padding-top"))-parseFloat(d.css("padding-bottom")))}e.pullData(e.page),e.events()},M.prototype.initOpts=function(e){var t=this,i=(t.config,{checkbox:48,radio:48,space:15,numbers:40});e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||i[e.type])},M.prototype.setInit=function(e){var t=this,i=t.config;return i.clientWidth=i.width||function(){var e=function(t){var a,l;t=t||i.elem.parent(),a=t.width();try{l="none"===t.css("display")}catch(n){}return!t[0]||a&&!l?a:e(t.parent())};return e()}(),"width"===e?i.clientWidth:void layui.each(i.cols,function(e,a){layui.each(a,function(l,n){if(!n)return void a.splice(l,1);if(n.key=e+"-"+l,n.hide=n.hide||!1,n.colGroup||n.colspan>1){var o=0;layui.each(i.cols[e+1],function(t,i){i.HAS_PARENT||o>1&&o==n.colspan||(i.HAS_PARENT=!0,i.parentKey=e+"-"+l,o+=parseInt(i.colspan>1?i.colspan:1))}),n.colGroup=!0}t.initOpts(n)})})},M.prototype.renderToolbar=function(){var e=this,t=e.config,l=['<div class="layui-inline" lay-event="add"><i class="layui-icon layui-icon-add-1"></i></div>','<div class="layui-inline" lay-event="update"><i class="layui-icon layui-icon-edit"></i></div>','<div class="layui-inline" lay-event="delete"><i class="layui-icon layui-icon-delete"></i></div>'].join(""),n=e.layTool.find(".layui-table-tool-temp");if("default"===t.toolbar)n.html(l);else if("string"==typeof t.toolbar){var o=i(t.toolbar).html()||"";o&&n.html(a(o).render(t))}var r={filter:{title:"筛选列",layEvent:"LAYTABLE_COLS",icon:"layui-icon-cols"},exports:{title:"导出",layEvent:"LAYTABLE_EXPORT",icon:"layui-icon-export"},print:{title:"打印",layEvent:"LAYTABLE_PRINT",icon:"layui-icon-print"}},d=[];"object"==typeof t.defaultToolbar&&layui.each(t.defaultToolbar,function(e,t){var i="string"==typeof t?r[t]:t;i&&d.push('<div class="layui-inline" title="'+i.title+'" lay-event="'+i.layEvent+'"><i class="layui-icon '+i.icon+'"></i></div>')}),e.layTool.find(".layui-table-tool-self").html(d.join(""))},M.prototype.setParentCol=function(e,t){var i=this,a=i.config,l=i.layHeader.find('th[data-key="'+a.index+"-"+t+'"]'),n=parseInt(l.attr("colspan"))||0;if(l[0]){var o=t.split("-"),r=a.cols[o[0]][o[1]];e?n--:n++,l.attr("colspan",n),l[n<1?"addClass":"removeClass"](v),r.colspan=n,r.hide=n<1;var d=l.data("parentkey");d&&i.setParentCol(e,d)}},M.prototype.setColsPatch=function(){var e=this,t=e.config;layui.each(t.cols,function(t,i){layui.each(i,function(t,i){i.hide&&e.setParentCol(i.hide,i.parentKey)})})},M.prototype.setColsWidth=function(){var e=this,t=e.config,i=0,a=0,l=0,n=0,o=e.setInit("width");e.eachCols(function(e,t){t.hide||i++}),o=o-function(){return"line"===t.skin||"nob"===t.skin?2:i+1}()-e.getScrollWidth(e.layMain[0])-1;var r=function(e){layui.each(t.cols,function(i,r){layui.each(r,function(i,d){var c=0,s=d.minWidth||t.cellMinWidth;return d?void(d.colGroup||d.hide||(e?l&&l<s&&(a--,c=s):(c=d.width||0,/\d+%$/.test(c)?(c=Math.floor(parseFloat(c)/100*o),c<s&&(c=s)):c||(d.width=c=0,a++)),d.hide&&(c=0),n+=c)):void r.splice(i,1)})}),o>n&&a&&(l=(o-n)/a)};r(),r(!0),e.autoColNums=a,e.eachCols(function(i,a){var n=a.minWidth||t.cellMinWidth;a.colGroup||a.hide||(0===a.width?e.getCssRule(t.index+"-"+a.key,function(e){e.style.width=Math.floor(l>=n?l:n)+"px"}):/\d+%$/.test(a.width)&&e.getCssRule(t.index+"-"+a.key,function(e){e.style.width=Math.floor(parseFloat(a.width)/100*o)+"px"}))});var d=e.layMain.width()-e.getScrollWidth(e.layMain[0])-e.layMain.children("table").outerWidth();if(e.autoColNums&&d>=-i&&d<=i){var c=function(t){var i;return t=t||e.layHeader.eq(0).find("thead th:last-child"),i=t.data("field"),!i&&t.prev()[0]?c(t.prev()):t},s=c(),u=s.data("key");e.getCssRule(u,function(t){var i=t.style.width||s.outerWidth();t.style.width=parseFloat(i)+d+"px",e.layMain.height()-e.layMain.prop("clientHeight")>0&&(t.style.width=parseFloat(t.style.width)-1+"px")})}e.loading(!0)},M.prototype.resize=function(){var e=this;e.fullSize(),e.setColsWidth(),e.scrollPatch()},M.prototype.reload=function(e){var t=this;e=e||{},delete t.haveInit,e.data&&e.data.constructor===Array&&delete t.config.data,t.config=i.extend(!0,{},t.config,e),t.render()},M.prototype.errorView=function(e){var t=this,a=t.layMain.find("."+m),l=i('<div class="'+m+'">'+(e||"Error")+"</div>");a[0]&&(t.layNone.remove(),a.remove()),t.layFixed.addClass(v),t.layMain.find("tbody").html(""),t.layMain.append(t.layNone=l),s.cache[t.key]=[]},M.prototype.page=1,M.prototype.pullData=function(e){var t=this,a=t.config,l=a.request,n=a.response,o=function(){"object"==typeof a.initSort&&t.sort(a.initSort.field,a.initSort.type)};if(t.startTime=(new Date).getTime(),a.url){var r={};r[l.pageName]=e,r[l.limitName]=a.limit;var d=i.extend(r,a.where);a.contentType&&0==a.contentType.indexOf("application/json")&&(d=JSON.stringify(d)),t.loading(),i.ajax({type:a.method||"get",url:a.url,contentType:a.contentType,data:d,dataType:"json",headers:a.headers||{},success:function(i){"function"==typeof a.parseData&&(i=a.parseData(i)||i),i[n.statusName]!=n.statusCode?(t.renderForm(),t.errorView(i[n.msgName]||'返回的数据不符合规范，正确的成功状态码应为："'+n.statusName+'": '+n.statusCode)):(t.renderData(i,e,i[n.countName]),o(),a.time=(new Date).getTime()-t.startTime+" ms"),t.setColsWidth(),"function"==typeof a.done&&a.done(i,e,i[n.countName])},error:function(e,i){t.errorView("数据接口请求异常："+i),t.renderForm(),t.setColsWidth()}})}else if(a.data&&a.data.constructor===Array){var c={},s=e*a.limit-a.limit;c[n.dataName]=a.data.concat().splice(s,a.limit),c[n.countName]=a.data.length,"object"==typeof a.totalRow&&(c[n.totalRowName]=i.extend({},a.totalRow)),t.renderData(c,e,c[n.countName]),o(),t.setColsWidth(),"function"==typeof a.done&&a.done(c,e,c[n.countName])}},M.prototype.eachCols=function(e){var t=this;return s.eachCols(null,e,t.config.cols),t},M.prototype.renderData=function(e,t,o,d){var c=this,u=c.config,h=e[u.response.dataName]||[],f=e[u.response.totalRowName],p=[],g=[],b=[],x=function(){var e;return!d&&c.sortKey?c.sort(c.sortKey.field,c.sortKey.sort,!0):(layui.each(h,function(l,n){var o=[],f=[],m=[],x=l+u.limit*(t-1)+1;JSON.stringify(n);0!==n.length&&(d||(n[s.config.indexName]=l),c.eachCols(function(t,d){var c=d.field||t,p=u.index+"-"+d.key,g=n[c];if(void 0!==g&&null!==g||(g=""),u.escape&&(g=r.escape(g)),!d.colGroup){var b=['<td data-field="'+c+'" data-key="'+p+'" '+function(){var e=[];return d.edit&&e.push('data-edit="'+d.edit+'"'),d.align&&e.push('align="'+d.align+'"'),d.templet&&e.push('data-content="'+g+'"'),d.toolbar&&e.push('data-off="true"'),d.event&&e.push('lay-event="'+d.event+'"'),d.style&&e.push('style="'+d.style+'"'),d.minWidth&&e.push('data-minwidth="'+d.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return d.hide&&e.push(v),d.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){return"normal"===d.type?p:p+" laytable-cell-"+d.type}()+'">'+function(){var t=i.extend(!0,{LAY_INDEX:x},n),o=s.config.checkName;switch(d.type){case"checkbox":return"<input "+function(){return d.show&&0==d.show(t)?(h[l].layuiCheckShowMark=!0,' type="hidden" '):' type="checkbox" name="layTableCheckbox"  '}()+' lay-skin="primary" '+function(){return d[o]?(n[o]=d[o],d[o]?"checked":""):t[o]?"checked":""}()+">";case"radio":return t[o]&&(e=l),'<input type="radio" name="layTableRadio_'+u.index+'" '+(t[o]?"checked":"")+' lay-type="layTableRadio"'+function(){return d.show&&0==d.show(t)?' lay-ignore style="visibility:hidden;" ':""}()+">";case"numbers":return x}return d.toolbar?a(i(d.toolbar).html()||"").render(t):y(d,g,t)}(),"</div></td>"].join("");o.push(b),d.fixed&&"right"!==d.fixed&&f.push(b),"right"===d.fixed&&m.push(b)}}),p.push('<tr data-index="'+l+'">'+o.join("")+"</tr>"),g.push('<tr data-index="'+l+'">'+f.join("")+"</tr>"),b.push('<tr data-index="'+l+'">'+m.join("")+"</tr>"))}),c.layBody.scrollTop(0),c.layMain.find("."+m).remove(),c.layMain.find("tbody").html(p.join("")),c.layFixLeft.find("tbody").html(g.join("")),c.layFixRight.find("tbody").html(b.join("")),c.renderForm(),"number"==typeof e&&c.setThisRowChecked(e),c.syncCheckAll(),c.haveInit?c.scrollPatch():setTimeout(function(){c.scrollPatch()},50),c.haveInit=!0,n.close(c.tipsIndex),u.HAS_SET_COLS_PATCH||c.setColsPatch(),void(u.HAS_SET_COLS_PATCH=!0))};return s.cache[c.key]=h,c.layPage[0==o||0===h.length&&1==t?"addClass":"removeClass"](v),d?x():0===h.length?(c.renderForm(),c.errorView(u.text.none)):(c.layFixed.removeClass(v),x(),c.renderTotal(h,f),void(u.page&&(u.page=i.extend({elem:"layui-table-page"+u.index,count:o,limit:u.limit,limits:u.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(e,t){t||(c.page=e.curr,u.limit=e.limit,c.pullData(e.curr))}},u.page),u.page.count=o,l.render(u.page))))},M.prototype.renderTotal=function(e,t){var i=this,a=i.config,l={};if(a.totalRow){layui.each(e,function(e,t){0!==t.length&&i.eachCols(function(e,i){var a=i.field||e,n=t[a];i.totalRow&&(l[a]=(l[a]||0)+(parseFloat(n)||0))})}),i.dataTotal={};var n=[];i.eachCols(function(e,o){var r=o.field||e,d=function(){var e=o.totalRowText||"",i=parseFloat(l[r]).toFixed(2),a={};return a[r]=i,i=y(o,i,a),t?t[o.field]||e:o.totalRow?i||e:e}(),c=['<td data-field="'+r+'" data-key="'+a.index+"-"+o.key+'" '+function(){var e=[];return o.align&&e.push('align="'+o.align+'"'),o.style&&e.push('style="'+o.style+'"'),o.minWidth&&e.push('data-minwidth="'+o.minWidth+'"'),e.join(" ")}()+' class="'+function(){var e=[];return o.hide&&e.push(v),o.field||e.push("layui-table-col-special"),e.join(" ")}()+'">','<div class="layui-table-cell laytable-cell-'+function(){var e=a.index+"-"+o.key;return"normal"===o.type?e:e+" laytable-cell-"+o.type}()+'">'+d,"</div></td>"].join("");o.field&&(i.dataTotal[r]=d),n.push(c)}),i.layTotal.find("tbody").html("<tr>"+n.join("")+"</tr>")}},M.prototype.getColElem=function(e,t){var i=this,a=i.config;return e.eq(0).find(".laytable-cell-"+(a.index+"-"+t)+":eq(0)")},M.prototype.renderForm=function(e){o.render(e,"LAY-table-"+this.index)},M.prototype.setThisRowChecked=function(e){var t=this,i=(t.config,"layui-table-click"),a=t.layBody.find('tr[data-index="'+e+'"]');a.addClass(i).siblings("tr").removeClass(i)},M.prototype.sort=function(e,t,a,l){var n,o,r=this,c={},u=r.config,h=u.elem.attr("lay-filter"),y=s.cache[r.key];"string"==typeof e&&r.layHeader.find("th").each(function(t,a){var l=i(this),o=l.data("field");if(o===e)return e=l,n=o,!1});try{var n=n||e.data("field"),p=e.data("key");if(r.sortKey&&!a&&n===r.sortKey.field&&t===r.sortKey.sort)return;var v=r.layHeader.find("th .laytable-cell-"+p).find(R);r.layHeader.find("th").find(R).removeAttr("lay-sort"),v.attr("lay-sort",t||null),r.layFixed.find("th")}catch(m){return d.error("Table modules: Did not match to field")}r.sortKey={field:n,sort:t},u.autoSort&&("asc"===t?o=layui.sort(y,n):"desc"===t?o=layui.sort(y,n,!0):(o=layui.sort(y,s.config.indexName),delete r.sortKey)),c[u.response.dataName]=o||y,r.renderData(c,r.page,r.count,!0),l&&layui.event.call(e,f,"sort("+h+")",{field:n,type:t})},M.prototype.loading=function(e){var t=this,a=t.config;a.loading&&(e?(t.layInit&&t.layInit.remove(),delete t.layInit,t.layBox.find(k).remove()):(t.layInit=i(['<div class="layui-table-init">','<i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i>',"</div>"].join("")),t.layBox.append(t.layInit)))},M.prototype.setCheckData=function(e,t){var i=this,a=i.config,l=s.cache[i.key];l[e]&&l[e].constructor!==Array&&(l[e][a.checkName]=t)},M.prototype.syncCheckAll=function(){var e=this,t=e.config,i=e.layHeader.find('input[name="layTableCheckbox"]'),a=function(i){return e.eachCols(function(e,a){"checkbox"===a.type&&(a[t.checkName]=i)}),i};i[0]&&(s.checkStatus(e.key).isAll?(i[0].checked||(i.prop("checked",!0),e.renderForm("checkbox")),a(!0)):(i[0].checked&&(i.prop("checked",!1),e.renderForm("checkbox")),a(!1)))},M.prototype.getCssRule=function(e,t){var i=this,a=i.elem.find("style")[0],l=a.sheet||a.styleSheet||{},n=l.cssRules||l.rules;layui.each(n,function(i,a){if(a.selectorText===".laytable-cell-"+e)return t(a),!0})},M.prototype.fullSize=function(){var e,i=this,a=i.config,l=a.height;i.fullHeightGap&&(l=F.height()-i.fullHeightGap-t(a.heightChangeElement),l<135&&(l=135),i.elem.css("height",l)),l&&(e=parseFloat(l)-(i.layHeader.outerHeight()||38),a.toolbar&&(e-=i.layTool.outerHeight()||50),a.totalRow&&(e-=i.layTotal.outerHeight()||40),a.page&&(e-=i.layPage.outerHeight()||41),i.layMain.css("height",e-2))},M.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:(e=document.createElement("div"),e.style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},M.prototype.scrollPatch=function(){var e=this,t=e.layMain.children("table"),a=e.layMain.width()-e.layMain.prop("clientWidth"),l=e.layMain.height()-e.layMain.prop("clientHeight"),n=(e.getScrollWidth(e.layMain[0]),t.outerWidth()-e.layMain.width()),o=function(e){if(a&&l){if(e=e.eq(0),!e.find(".layui-table-patch")[0]){var t=i('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');t.find("div").css({width:a}),e.find("tr").append(t)}}else e.find(".layui-table-patch").remove()};o(e.layHeader),o(e.layTotal);var r=e.layMain.height(),d=r-l;e.layFixed.find(w).css("height",t.height()>=d?d:"auto"),e.layFixRight[n>0?"removeClass":"addClass"](v),e.layFixRight.css("right",a-1)},M.prototype.events=function(){var e,t=this,a=t.config,l=i("body"),r={},d=t.layHeader.find("th"),u=".layui-table-cell",h=a.elem.attr("lay-filter");t.layTool.on("click","*[lay-event]",function(e){var l=i(this),r=l.attr("lay-event"),d=function(e){var n=i(e.list),o=i('<ul class="layui-table-tool-panel"></ul>');o.html(n),a.height&&o.css("max-height",a.height-(t.layTool.outerHeight()||50)),l.find(".layui-table-tool-panel")[0]||l.append(o),t.renderForm(),o.on("click",function(e){layui.stope(e)}),e.done&&e.done(o,n)};switch(layui.stope(e),I.trigger("table.tool.panel.remove"),n.close(t.tipsIndex),r){case"LAYTABLE_COLS":d({list:function(){var e=[];return t.eachCols(function(t,i){i.field&&"normal"==i.type&&e.push('<li><input type="checkbox" name="'+i.field+'" data-key="'+i.key+'" data-parentkey="'+(i.parentKey||"")+'" lay-skin="primary" '+(i.hide?"":"checked")+' title="'+(i.title||i.field)+'" lay-filter="LAY_TABLE_TOOL_COLS"></li>')}),e.join("")}(),done:function(){o.on("checkbox(LAY_TABLE_TOOL_COLS)",function(e){var l=i(e.elem),n=this.checked,o=l.data("key"),r=l.data("parentkey");layui.each(a.cols,function(e,i){layui.each(i,function(i,l){if(e+"-"+i===o){var d=l.hide;l.hide=!n,t.elem.find('*[data-key="'+a.index+"-"+o+'"]')[n?"removeClass":"addClass"](v),d!=l.hide&&t.setParentCol(!n,r),t.resize()}})})})}});break;case"LAYTABLE_EXPORT":c.ie?n.tips("导出功能不支持 IE，请用 Chrome 等高级浏览器导出",this,{tips:3}):d({list:function(){return['<li data-type="csv">导出到 Csv 文件</li>','<li data-type="xls">导出到 Excel 文件</li>'].join("")}(),done:function(e,l){l.on("click",function(){var e=i(this).data("type");s.exportFile.call(t,a.id,null,e)})}});break;case"LAYTABLE_PRINT":var u=window.open("打印窗口","_blank"),y=["<style>","body{font-size: 12px; color: #666;}","table{width: 100%; border-collapse: collapse; border-spacing: 0;}","th,td{line-height: 20px; padding: 9px 15px; border: 1px solid #ccc; text-align: left; font-size: 12px; color: #666;}","a{color: #666; text-decoration:none;}","*.layui-hide{display: none}","</style>"].join(""),p=i(t.layHeader.html());p.append(t.layMain.find("table").html()),p.append(t.layTotal.find("table").html()),p.find("th.layui-table-patch").remove(),p.find(".layui-table-col-special").remove(),u.document.write(y+p.prop("outerHTML")),u.document.close(),u.print(),u.close()}layui.event.call(this,f,"toolbar("+h+")",i.extend({event:r,config:a},{}))}),d.on("mousemove",function(e){var t=i(this),a=t.offset().left,n=e.clientX-a;t.data("unresize")||r.resizeStart||(r.allowResize=t.width()-n<=10,l.css("cursor",r.allowResize?"col-resize":""))}).on("mouseleave",function(){i(this);r.resizeStart||l.css("cursor","")}).on("mousedown",function(e){var l=i(this);if(r.allowResize){var n=l.data("key");e.preventDefault(),r.resizeStart=!0,r.offset=[e.clientX,e.clientY],t.getCssRule(n,function(e){var t=e.style.width||l.outerWidth();r.rule=e,r.ruleWidth=parseFloat(t),r.minWidth=l.data("minwidth")||a.cellMinWidth})}}),I.on("mousemove",function(i){if(r.resizeStart){if(i.preventDefault(),r.rule){var a=r.ruleWidth+i.clientX-r.offset[0];a<r.minWidth&&(a=r.minWidth),r.rule.style.width=a+"px",n.close(t.tipsIndex)}e=1}}).on("mouseup",function(i){r.resizeStart&&(r={},l.css("cursor",""),t.scrollPatch()),2===e&&(e=null)}),d.on("click",function(a){var l,n=i(this),o=n.find(R),r=o.attr("lay-sort");return o[0]&&1!==e?(l="asc"===r?"desc":"desc"===r?null:"asc",void t.sort(n,l,null,!0)):e=2}).find(R+" .layui-edge ").on("click",function(e){var a=i(this),l=a.index(),n=a.parents("th").eq(0).data("field");layui.stope(e),0===l?t.sort(n,"asc",null,!0):t.sort(n,"desc",null,!0)});var p=function(e){var a=i(this),l=a.parents("tr").eq(0).data("index"),n=t.layBody.find('tr[data-index="'+l+'"]'),o=s.cache[t.key]||[];return o=o[l]||{},i.extend({tr:n,data:s.clearCacheKey(o),del:function(){s.cache[t.key][l]=[],n.remove(),t.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(e,i){if(e in o){var a,l=n.children('td[data-field="'+e+'"]');o[e]=i,t.eachCols(function(t,i){i.field==e&&i.templet&&(a=i.templet)}),l.children(u).html(y({templet:a},i,o)),l.data("content",i)}})}},e)};t.elem.on("click",'input[name="layTableCheckbox"]+',function(){var e=i(this).prev(),a=t.layBody.find('input[name="layTableCheckbox"]'),l=e.parents("tr").eq(0).data("index"),n=e[0].checked,o="layTableAllChoose"===e.attr("lay-filter");o?(a.each(function(e,a){a.checked=n,t.setCheckData(i(a).parents("tr").eq(0).data("index"),n)}),t.syncCheckAll(),t.renderForm("checkbox")):(t.setCheckData(l,n),t.syncCheckAll()),layui.event.call(e[0],f,"checkbox("+h+")",p.call(e[0],{checked:n,type:o?"all":"one"}))}),t.elem.on("click",'input[lay-type="layTableRadio"]+',function(){var e=i(this).prev(),a=e[0].checked,l=s.cache[t.key],n=e.parents("tr").eq(0).data("index");layui.each(l,function(e,t){n===e?t.LAY_CHECKED=!0:delete t.LAY_CHECKED}),t.setThisRowChecked(n),layui.event.call(this,f,"radio("+h+")",p.call(this,{checked:a}))}),t.layBody.on("mouseenter","tr",function(){var e=i(this),a=e.index();e.data("off")||t.layBody.find("tr:eq("+a+")").addClass(_)}).on("mouseleave","tr",function(){var e=i(this),a=e.index();e.data("off")||t.layBody.find("tr:eq("+a+")").removeClass(_)}).on("click","tr",function(){m.call(this,"row")}).on("dblclick","tr",function(){m.call(this,"rowDouble")});var m=function(e){var t=i(this);t.data("off")||layui.event.call(this,f,e+"("+h+")",p.call(t.children("td")[0]))};t.layBody.on("change","."+W,function(){var e=i(this),a=this.value,l=e.parent().data("field"),n=e.parents("tr").eq(0).data("index"),o=s.cache[t.key][n];o[l]=a,layui.event.call(this,f,"edit("+h+")",p.call(this,{value:a,field:l}))}).on("blur","."+W,function(){var e,a=i(this),l=this,n=a.parent().data("field"),o=a.parents("tr").eq(0).data("index"),r=s.cache[t.key][o];t.eachCols(function(t,i){i.field==n&&i.templet&&(e=i.templet)}),a.siblings(u).html(function(t){return y({templet:e},t,r)}(l.value)),a.parent().data("content",l.value),a.remove()}),t.layBody.on("click","td",function(e){var t=i(this),a=(t.data("field"),t.data("edit")),l=t.children(u);if(!t.data("off")&&a){var n=i('<input class="layui-input '+W+'">');return n[0].value=t.data("content")||l.text(),t.find("."+W)[0]||t.append(n),n.focus(),void layui.stope(e)}}).on("mouseenter","td",function(){b.call(this)}).on("mouseleave","td",function(){b.call(this,"hide")});var g="layui-table-grid-down",b=function(e){var t=i(this),a=t.children(u);if(!t.data("off"))if(e)t.find(".layui-table-grid-down").remove();else if(a.prop("scrollWidth")>a.outerWidth()){if(a.find("."+g)[0])return;t.append('<div class="'+g+'"><i class="layui-icon layui-icon-down"></i></div>')}};t.layBody.on("click","."+g,function(e){var l=i(this),o=l.parent(),r=o.children(u);t.tipsIndex=n.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(r.height()+16)+"px;"+function(){return"sm"===a.size?"padding: 4px 15px; font-size: 12px;":"lg"===a.size?"padding: 14px 15px;":""}()+'">',r.html(),"</div>",'<i class="layui-icon layui-table-tips-c layui-icon-close"></i>'].join(""),r[0],{tips:[3,""],time:-1,anim:-1,maxWidth:c.ios||c.android?300:t.elem.width()/2,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){n.close(t)})}}),layui.stope(e)}),t.layBody.on("click","*[lay-event]",function(){var e=i(this),a=e.parents("tr").eq(0).data("index");layui.event.call(this,f,"tool("+h+")",p.call(this,{event:e.attr("lay-event")})),t.setThisRowChecked(a)}),t.layMain.on("scroll",function(){var e=i(this),a=e.scrollLeft(),l=e.scrollTop();t.layHeader.scrollLeft(a),t.layTotal.scrollLeft(a),t.layFixed.find(w).scrollTop(l),n.close(t.tipsIndex)}),F.on("resize",function(){t.resize()})},function(){I.on("click",function(){I.trigger("table.remove.tool.panel")}),I.on("table.remove.tool.panel",function(){i(".layui-table-tool-panel").remove()})}(),s.init=function(e,t){t=t||{};var a=this,l=i(e?'table[lay-filter="'+e+'"]':p+"[lay-data]"),n="Table element property lay-data configuration item has a syntax error: ";return l.each(function(){var a=i(this),l=a.attr("lay-data");try{l=new Function("return "+l)()}catch(o){d.error(n+l)}var r=[],c=i.extend({elem:this,cols:[],data:[],skin:a.attr("lay-skin"),size:a.attr("lay-size"),even:"string"==typeof a.attr("lay-even")},s.config,t,l);e&&a.hide(),a.find("thead>tr").each(function(e){c.cols[e]=[],i(this).children().each(function(t){var a=i(this),l=a.attr("lay-data");try{l=new Function("return "+l)()}catch(o){return d.error(n+l)}var s=i.extend({title:a.text(),colspan:a.attr("colspan")||0,rowspan:a.attr("rowspan")||0},l);s.colspan<2&&r.push(s),c.cols[e].push(s)})}),a.find("tbody>tr").each(function(e){var t=i(this),a={};t.children("td").each(function(e,t){var l=i(this),n=l.data("field");if(n)return a[n]=l.html()}),layui.each(r,function(e,i){var l=t.children("td").eq(e);a[i.field]=l.html()}),c.data[e]=a}),s.render(c)}),a},u.that={},u.config={},s.eachCols=function(e,t,a){var l=u.config[e]||{},n=[],o=0;a=i.extend(!0,[],a||l.cols),layui.each(a,function(e,t){layui.each(t,function(t,i){if(i.colGroup){var l=0;o++,i.CHILD_COLS=[],layui.each(a[e+1],function(e,t){t.PARENT_COL_INDEX||l>1&&l==i.colspan||(t.PARENT_COL_INDEX=o,i.CHILD_COLS.push(t),l+=parseInt(t.colspan>1?t.colspan:1))})}i.PARENT_COL_INDEX||n.push(i)})});var r=function(e){layui.each(e||n,function(e,i){return i.CHILD_COLS?r(i.CHILD_COLS):void("function"==typeof t&&t(e,i))})};r()},s.checkStatus=function(e){var t=0,i=0,a=[],l=s.cache[e]||[],n=0;return layui.each(l,function(e,l){return l.constructor===Array?void i++:l.layuiCheckShowMark?void n++:void(l[s.config.checkName]&&(t++,a.push(s.clearCacheKey(l))))}),{data:a,isAll:!!l.length&&t===l.length-i-n}},s.exportFile=function(e,t,i){var a=this;t=t||s.clearCacheKey(s.cache[e]),i=i||"csv";var l=u.config[e]||{},n={csv:"text/csv",xls:"application/vnd.ms-excel"}[i],o=document.createElement("a");return c.ie?d.error("IE_NOT_SUPPORT_EXPORTS"):(o.href="data:"+n+";charset=utf-8,\ufeff"+encodeURIComponent(function(){var i=[],l=[],n=[];return layui.each(t,function(t,a){var n=[];"object"==typeof e?(layui.each(e,function(e,a){0==t&&i.push(a||"")}),layui.each(s.clearCacheKey(a),function(e,t){n.push('"'+(t||"")+'"')})):s.eachCols(e,function(e,l){if(l.field&&"normal"==l.type&&!l.hide){var o=a[l.field];void 0!==o&&null!==o||(o=""),0==t&&i.push(l.title||""),n.push('"'+y(l,o,a,"text")+'"')}}),l.push(n.join(","))}),layui.each(a.dataTotal,function(e,t){n.push(t)}),i.join(",")+"\r\n"+l.join("\r\n")+"\r\n"+n.join(",")}()),o.download=(l.title||"table_"+(l.index||""))+"."+i,document.body.appendChild(o),o.click(),void document.body.removeChild(o))},s.resize=function(e){if(e){var t=h(e);if(!t)return;u.that[e].resize()}else layui.each(u.that,function(){this.resize()})},s.reload=function(e,t){var i=h(e);if(i){var a=u.that[e];return a.reload(t),u.call(a)}},s.render=function(e){var t=new M(e);return u.call(t)},s.clearCacheKey=function(e){return e=i.extend({},e),delete e[s.config.checkName],delete e[s.config.indexName],e},s.init(),e(f,s)});